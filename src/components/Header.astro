---
import { FreeDemoDialog } from "@/components/FreeDemoDialog"
import HeaderLink from "@/components/HeaderLink.astro"
import FoxLogo from "@/components/icons/FoxLogo.astro"
import LanguageSelector from "@/components/LanguageSelector.astro"
import { getI18N } from "@/i18n"
import { getLangFromUrl, useTranslatedPath } from "@/i18n/utils"

const { currentLocale } = Astro
const i18n = getI18N({ currentLocale })

const lang = getLangFromUrl(Astro.url)
const translatePath = useTranslatedPath(lang)
---

<header
	id="header-nav"
	class="fixed z-50 flex h-20 w-full items-center bg-background px-9 text-foreground"
>
	<nav class="flex w-full items-center justify-between">
		<a href={translatePath("/")} aria-label={i18n.HEADER.LOGO}> <FoxLogo class="h-12 w-auto" /></a>
		<div class="flex items-center gap-4">
			<HeaderLink href={translatePath("/what-we-offer")}>{i18n.HEADER_WHAT_WE_OFFER}</HeaderLink>
			<HeaderLink href={translatePath("/about-us")}>{i18n.HEADER_ABOUT_US}</HeaderLink>
			<HeaderLink href={translatePath("/support")}>{i18n.HEADER_SUPPORT}</HeaderLink>
			<HeaderLink href={translatePath("/order-online")}>{i18n.HEADER_ORDER_ONLINE}</HeaderLink>
			<HeaderLink href={translatePath("/blog")}>{i18n.HEADER_BLOG}</HeaderLink>
		</div>
		<div class="flex items-center gap-4">
			<LanguageSelector />
			<FreeDemoDialog client:load locale={currentLocale ?? "en"} />
		</div>
	</nav>
</header>
<!-- <style>
	#header-nav {
		animation: blur linear both;
		animation-timeline: scroll(root);
		animation-range: 0 200px;
	}

	@keyframes blur {
		to {
			background-color: hsl(var(--background));
		}
	}
</style> -->
